# DayZ Mod Structure

## Complete Mod Folder Layout
```
@MyMod/
├── mod.cpp                         # Mod metadata (name, author, version)
├── meta.cpp                        # Workshop metadata (auto-generated by Workbench)
├── Keys/
│   └── MyMod.bikey                 # Server key for signature verification
├── Addons/
│   └── MyMod/
│       ├── config.cpp              # Main config (CfgPatches, CfgMods, CfgVehicles)
│       ├── $PREFIX$                # Contains addon prefix path (e.g., "MyMod")
│       ├── data/                   # Models, textures, materials
│       │   ├── myitem.p3d
│       │   ├── myitem_co.paa       # Color/diffuse texture
│       │   └── myitem_nohq.paa     # Normal map
│       └── scripts/
│           ├── config.cpp          # Script module registration
│           ├── 3_Game/             # Game-level (available everywhere)
│           │   └── MyGameScript.c
│           ├── 4_World/            # World-level (entities, items)
│           │   ├── MyItem.c
│           │   └── MyAction.c
│           └── 5_Mission/          # Mission-level (HUD, menus)
│               └── MyMission.c
```

## mod.cpp
```cpp
name = "My Mod Name";
author = "AuthorName";
version = "1.0";
type = "mod";
// Optional dependencies
dependencies[] = {"Game", "World", "Mission"};
```

## meta.cpp (Auto-generated)
```cpp
protocol = 2;
publishedid = 0;     // Steam Workshop ID (0 = unpublished)
timestamp = 1234567; // Last build timestamp
```

## config.cpp (Main - Addon Level)
```cpp
class CfgPatches
{
    class MyMod
    {
        units[] = {};               // Classnames this patch adds
        weapons[] = {};             // Weapon classnames this patch adds
        requiredVersion = 0.1;
        requiredAddons[] = {"DZ_Data"};  // Dependencies
    };
};

class CfgMods
{
    class MyMod
    {
        dir = "MyMod";
        picture = "";
        action = "";
        hideName = 1;
        hidePicture = 1;
        name = "MyMod";
        credits = "";
        author = "AuthorName";
        authorID = "";
        version = "1.0";
        extra = 0;
        type = "mod";

        dependencies[] = {"Game", "World", "Mission"};

        class defs
        {
            class gameScriptModule
            {
                value = "";
                files[] = {"MyMod/scripts/3_Game"};
            };
            class worldScriptModule
            {
                value = "";
                files[] = {"MyMod/scripts/4_World"};
            };
            class missionScriptModule
            {
                value = "";
                files[] = {"MyMod/scripts/5_Mission"};
            };
        };
    };
};
```

## config.cpp (Script Level - scripts/config.cpp)
```cpp
class CfgPatches
{
    class MyMod_Scripts
    {
        units[] = {};
        weapons[] = {};
        requiredVersion = 0.1;
        requiredAddons[] = {"DZ_Scripts"};
    };
};
```

## Adding New Items (CfgVehicles)
```cpp
class CfgVehicles
{
    class Inventory_Base;  // External class reference

    class MyCustomItem : Inventory_Base
    {
        scope = 2;                      // 0=private, 1=protected, 2=public (spawnable)
        displayName = "My Custom Item";
        descriptionShort = "A custom item";
        model = "\MyMod\data\myitem.p3d";
        weight = 500;                   // grams
        itemSize[] = {2, 3};            // inventory slots (width, height)
        rotationFlags = 17;             // rotation in inventory
        absorbency = 0;                 // water absorbency
        inventorySlot[] = {};           // attachment slots this fits in
        lootCategory = "Crafted";
        lootTag[] = {"Civilian"};

        class DamageSystem
        {
            class GlobalHealth
            {
                class Health
                {
                    hitpoints = 100;
                    healthLevels[] =
                    {
                        {1.0, {}},      // Pristine
                        {0.7, {}},      // Worn
                        {0.5, {}},      // Damaged
                        {0.3, {}},      // Badly Damaged
                        {0.0, {}}       // Ruined
                    };
                };
            };
        };
    };
};
```

## $PREFIX$ File
Plain text file containing the addon prefix path:
```
MyMod
```

## PBO Packaging

Mods must be packed into PBO (Packed Bohemia Object) files for deployment:

1. **Workbench**: Use File > Export to PBO
2. **DayZ Tools**: Use AddonBuilder
3. **Community tools**: `dayz-dev-tools` (Python), `PBO Manager`

The PBO is placed in the `Addons/` folder of your mod directory.

## Script Module Access Rules

| Module | Can Access | Cannot Access |
|--------|-----------|---------------|
| `3_Game` | Engine API, built-in types | `4_World`, `5_Mission` |
| `4_World` | `3_Game`, engine API | `5_Mission` |
| `5_Mission` | `3_Game`, `4_World`, engine API | N/A (highest level) |

## Common Dependencies
```cpp
// Vanilla only
requiredAddons[] = {"DZ_Data"};

// With Community Framework
requiredAddons[] = {"DZ_Data", "JM_CF_Scripts"};

// With Expansion
requiredAddons[] = {"DZ_Data", "JM_CF_Scripts", "DayZExpansion_Core"};
```
